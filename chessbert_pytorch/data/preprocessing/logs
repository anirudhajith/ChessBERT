WARNING:tensorflow:Error in loading the saved optimizer state. As a result, your model is starting with a freshly initialized optimizer.
WARNING:tensorflow:Error in loading the saved optimizer state. As a result, your model is starting with a freshly initialized optimizer.
illegal san: 'Kg2' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5c72940 ('?' vs. '?', '????.??.??' at '?')>
illegal san: 'Nxf6' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5b5f280 ('?' vs. '?', '????.??.??' at '?')>
illegal san: 'Rf3' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5c320d0 ('?' vs. '?', '????.??.??' at '?')>
illegal san: 'Nxf7' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5c9e310 ('?' vs. '?', '????.??.??' at '?')>
illegal san: 'Rc1' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5c63ca0 ('?' vs. '?', '????.??.??' at '?')>
illegal san: 'Rf1' in rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 while parsing <Game at 0x7fe2e5b00190 ('?' vs. '?', '????.??.??' at '?')>
Process Process-2:
Process Process-1:
Traceback (most recent call last):
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 155, in <module>
    worker.join()
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/process.py", line 149, in join
    res = self._popen.wait(timeout)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/popen_fork.py", line 43, in wait
    return self.poll(os.WNOHANG if timeout == 0.0 else 0)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/popen_fork.py", line 27, in poll
    pid, sts = os.waitpid(self.pid, flag)
KeyboardInterrupt
Traceback (most recent call last):
Traceback (most recent call last):
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 107, in game_embeddings
    results = index.query(queries=embeddings.tolist(), top_k = k, include_metadata = True)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/utils/error_handling.py", line 17, in inner_func
    return func(*args, **kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/index.py", line 455, in query
    response = self._vector_api.query(
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 776, in __call__
    return self.callable(self, *args, **kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api/vector_operations_api.py", line 716, in __query
    return self.call_with_http_info(**kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 838, in call_with_http_info
    return self.api_client.call_api(
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 413, in call_api
    return self.__call_api(resource_path, method,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 207, in __call_api
    raise e
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 107, in game_embeddings
    results = index.query(queries=embeddings.tolist(), top_k = k, include_metadata = True)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 200, in __call_api
    response_data = self.request(
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/utils/error_handling.py", line 17, in inner_func
    return func(*args, **kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 459, in request
    return self.rest_client.POST(url,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/index.py", line 455, in query
    response = self._vector_api.query(
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/rest.py", line 271, in POST
    return self.request("POST", url,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 776, in __call__
    return self.callable(self, *args, **kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/rest.py", line 228, in request
    raise ServiceException(http_resp=r)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api/vector_operations_api.py", line 716, in __query
    return self.call_with_http_info(**kwargs)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 838, in call_with_http_info
    return self.api_client.call_api(
pinecone.core.client.exceptions.ServiceException: (504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:26:35 GMT', 'server': 'envoy'})
HTTP response body: upstream request timeout

  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 413, in call_api
    return self.__call_api(resource_path, method,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 207, in __call_api
    raise e

During handling of the above exception, another exception occurred:

  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 200, in __call_api
    response_data = self.request(
Traceback (most recent call last):
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/api_client.py", line 459, in request
    return self.rest_client.POST(url,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/rest.py", line 271, in POST
    return self.request("POST", url,
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/site-packages/pinecone/core/client/rest.py", line 228, in request
    raise ServiceException(http_resp=r)
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 51, in pgn_to_positions
    embeddings = game_embeddings(next_game, game_index, encoder, index, num_context)
pinecone.core.client.exceptions.ServiceException: (504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:26:35 GMT', 'server': 'envoy'})
HTTP response body: upstream request timeout

  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 110, in game_embeddings
    time.sleep(60)
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/home/david/anaconda3/envs/vectors/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 51, in pgn_to_positions
    embeddings = game_embeddings(next_game, game_index, encoder, index, num_context)
  File "/home/david/Masters/VectorCOS597A/ChessBERT/chessbert_pytorch/data/preprocessing/preprocessing.py", line 110, in game_embeddings
    time.sleep(60)
KeyboardInterrupt
'utf-8' codec can't decode byte 0xfc in position 5573: invalid start byte
'utf-8' codec can't decode byte 0xf3 in position 3274: invalid continuation byte
'utf-8' codec can't decode byte 0xf3 in position 4930: invalid continuation byte
'utf-8' codec can't decode byte 0xfc in position 1650: invalid start byte
'utf-8' codec can't decode byte 0xe9 in position 327: invalid continuation byte
'utf-8' codec can't decode byte 0xf3 in position 715: invalid continuation byte
'utf-8' codec can't decode byte 0xfc in position 6797: invalid start byte
(504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:25:20 GMT', 'server': 'envoy', 'connection': 'close'})
HTTP response body: upstream request timeout

(504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:26:35 GMT', 'server': 'envoy'})
HTTP response body: upstream request timeout

'utf-8' codec can't decode byte 0xfc in position 1362: invalid start byte
'utf-8' codec can't decode byte 0xe4 in position 4255: invalid continuation byte
'utf-8' codec can't decode byte 0xe9 in position 3066: invalid continuation byte
(504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:25:19 GMT', 'server': 'envoy', 'connection': 'close'})
HTTP response body: upstream request timeout

(504)
Reason: Gateway Timeout
HTTP response headers: HTTPHeaderDict({'content-type': 'text/plain', 'content-length': '24', 'date': 'Tue, 28 Nov 2023 17:26:35 GMT', 'server': 'envoy'})
HTTP response body: upstream request timeout

